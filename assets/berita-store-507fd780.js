import{R as g,d as u,H as l}from"./index-c0e2bd1a.js";import{a as h}from"./date-utils-ee963ed8.js";const n=new g("berita");function c(e){return n.get({page:parseInt(e)})}function d(e){return n.get({},e)}function p(e){return n.store(e,"save",!0)}function f(e,s){return n.update(e,s,"update",!0)}function m(e){return n.destroy("delete",e)}const a=l();function r(){a.show({color:"#0069d9",blur:"5px"})}function o(e,s){console.log("Result Berita Form"),console.log(s);const t=new FormData;return t.append("judul",e.judul),t.append("tanggal_unggah",h(e.tanggal_unggah)),t.append("isi",e.isi),s&&t.append("foto",s),t}const q=u("berita",{state:()=>({beritaData:[],beritaSingleData:{judul:"",tanggal_unggah:"",isi:"",foto_url:"",foto_name:""},errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1}),actions:{clearForm(){console.log("clear Form"),this.beritaSingleData={judul:"",tanggal_unggah:"",isi:"",foto_url:"",foto_name:""},console.log(this.beritaSingleData)},async getList(){r(),await c(this.page).then(e=>{this.totalData=e.total,this.currentPage=e.current_page,this.totalPage=e.total>10?Math.ceil(e.total/10):1,this.lastNoPage=e.from,this.beritaData=e.data,a.hide()}).catch(e=>{e.response?this.errorMessage=e.response.data.message:e.request?this.errorMessage=e.request:this.errorMessage=e.message,a.hide()})},saveBerita(e,s){r(),p(o(e,s)).then(t=>{this.isSuccessSubmit=!0,a.hide()}).catch(t=>{t.response?this.errorMessage=t.response.data.message:t.request?this.errorMessage=t.request:this.errorMessage=t.message,a.hide()})},updateBerita(e,s,t){r(),f(e,o(s,t)).then(i=>{this.isSuccessSubmit=!0,a.hide()}).catch(i=>{i.response?this.errorMessage=i.response.data.message:i.request?this.errorMessage=i.request:this.errorMessage=i.message,a.hide()})},deleteBerita(e){r(),m(e).then(s=>{this.isSuccessSubmit=!0,a.hide()}).catch(s=>{s.response?this.errorMessage=s.response.data.message:s.request?this.errorMessage=s.request:this.errorMessage=s.message,a.hide()})},getBeritaById(e){r(),d(e).then(s=>{this.beritaSingleData=s.data,a.hide(),console.log(this.beritaSingleData)}).catch(s=>{s.response?this.errorMessage=s.response.data.message:s.request?this.errorMessage=s.request:this.errorMessage=s.message,a.hide()})}}});export{q as u};

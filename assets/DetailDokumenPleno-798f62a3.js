import{R as K,d as x,H as M,e as w,I as P,f as T,J as F,r as q,w as f,o as I,g as r,i,j as t,t as l,u as n,F as L,E as R,C as k,y as B,z as N,A as V}from"./index-194bee8b.js";import{u as j}from"./dokumen-pleno-store-30e93a52.js";import{k as A}from"./form-utils-1424947d.js";import{f as E}from"./date-utils-ee963ed8.js";const b=new K("komentar-pleno");function O(a,e){return b.get({page:parseInt(a),documentId:e})}function U(a){return b.store(a,"save",!0)}const m=M();function z(){m.show({color:"#0069d9",blur:"5px"})}const C=x("komentar-pleno",{state:()=>({komentarData:[],errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1,loadingSubmit:!1}),actions:{getListKomentar(a){z(),O(this.page,a).then(e=>{e&&(this.totalData=e.total,this.currentPage=e.current_page,this.totalPage=e.total>10?Math.ceil(e.total/10):1,this.lastNoPage=e.from,this.komentarData=e.data),m.hide()}).catch(e=>{e.response?this.errorMessage=e.response.data.message:e.request?this.errorMessage=e.request:this.errorMessage=e.message,m.hide()})},saveKomentar(a,e){this.loadingSubmit=!0;const s=A(a,e);U(s).then(o=>{this.loadingSubmit=!1,this.isSuccessSubmit=!0,this.getListKomentar(a.dokId)}).catch(o=>{o.response?this.errorMessage=o.response.data.message:o.request?this.errorMessage=o.request:this.errorMessage=o.message,this.loadingSubmit=!1,m.hide()})}}}),H={class:"card"},J={class:"card-body"},$={class:"row"},G={class:"col-12 col-md-12 col-lg-8 order-2 order-md-1"},Q={class:"row p-3"},W={class:"col-12"},X={class:"row"},Y=["src"],Z={class:"mt-3"},tt=t("h4",null,"Komentar",-1),et={key:0,class:"text-center"},st={class:"user"},at={class:"username",style:{color:"blue"}},ot={class:"col-12 mt-5"},nt=["onSubmit"],rt={class:"form-group"},it={type:"submit",class:"btn btn-primary"},lt={key:0,class:"text-center spinner-border"},ct={key:1},dt={class:"col-12 col-md-12 col-lg-4 order-1 order-md-2 p-3"},mt=t("h4",{class:"text-block"},"Keterangan",-1),ut={class:"text-muted"},ht=t("hr",null,null,-1),_t={class:"text-muted"},gt={class:"text"},pt={class:"d-block"},ft=t("div",{class:"form-group"},null,-1),Dt={__name:"DetailDokumenPleno",setup(a){const e=j(),s=C(),o=w(),u=P(),{komentarData:g,loadingSubmit:v}=T(s),p=()=>({dokId:u.params.id,komentar:""}),d=F(p()),S=q(null);s.$subscribe((h,_)=>{}),f(()=>s.errorMessage,()=>{s.errorMessage&&o.add({type:"error",text:s.errorMessage})}),f(()=>s.isSuccessSubmit,()=>{Object.assign(d,p()),o.add({type:"success",text:"Komentar Berhasil di Tambahkan"})});function D(h){h.preventDefault(),s.saveKomentar(d,S.value)}return I(()=>{e.getDokPlenoById(u.params.id),s.getListKomentar(u.params.id)}),(h,_)=>(r(),i("div",H,[t("div",J,[t("div",$,[t("div",G,[t("div",Q,[t("div",W,[t("h4",null,"Nomor Dokumen: "+l(n(e).singleData.no_surat),1),t("div",X,[t("iframe",{src:n(e).singleData.dokumen_url,frameborder:"0",width:"100%",height:"800"},null,8,Y)]),t("div",Z,[tt,n(g).length==0?(r(),i("div",et," Tidak Ada Komentar ")):(r(!0),i(L,{key:1},R(n(g),(c,y)=>(r(),i("div",{class:"post",key:y},[t("div",st,[t("span",at,l(c.nama_user),1)]),t("p",null,[k(l(c.komentar)+" ",1),t("p",null,l(n(E)(c.created_at)),1)])]))),128))])]),t("div",ot,[t("form",{class:"form",onSubmit:B(D,["prevent"])},[t("div",rt,[N(t("textarea",{class:"form-control",placeholder:"Tulis Komentar","onUpdate:modelValue":_[0]||(_[0]=c=>d.komentar=c)},null,512),[[V,d.komentar]])]),t("button",it,[n(v)?(r(),i("span",lt)):(r(),i("span",ct,"Komentar"))])],40,nt)])])]),t("div",dt,[mt,t("p",ut,l(n(e).singleData.keterangan),1),ht,t("div",_t,[t("p",gt,[k(" Tanggal Unggah "),t("b",pt,l(n(e).singleData.tanggal_unggah),1)]),ft])])])])]))}};export{Dt as default};

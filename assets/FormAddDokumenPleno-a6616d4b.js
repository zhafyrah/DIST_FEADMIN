import{d as w,e as B,q as M,H as F,c as _,r as l,w as v,o as V,g as r,i as c,j as e,t as h,u as A,D as J,E as b,z as m,A as k,J as L,y as O}from"./index-b1176ff1.js";import{u as q}from"./dokumen-pleno-store-df545e17.js";import"./vue3-datepicker-2eb64829.js";import{L as C}from"./LoadingComponent-d14cf662.js";import"./date-utils-b77f79dd.js";const E=w("localStorage",{state:()=>({user:null,permissions:{}}),getters:{getUser(){return this.user||JSON.parse(localStorage.getItem("user"))||null},getPermission(){return Object.keys(this.permissions).length?this.permissions:JSON.parse(localStorage.getItem("permission"))||{}}},actions:{setUser(n){this.user=n,localStorage.setItem("user",JSON.stringify(n))},setPermissions(n){this.permissions=n,localStorage.setItem("permissions",JSON.stringify(n))},clearUser(){this.user=null,localStorage.removeItem("user")},clearPermissions(){this.permissions={},localStorage.removeItem("permissions")},clearLocalStorage(){this.clearUser(),this.clearPermissions()}}}),T={class:"card"},j={class:"card-header"},K={class:"d-flex align-items-center"},R={class:"card-title"},z=["onSubmit"],H={class:"card-body position-relative"},$={class:"row"},G={class:"col-md-12"},Q={class:"form-group"},W=e("label",{for:"inputName"},"No Dokumen",-1),X={class:"col-md-12"},Y={class:"form-group"},Z=e("label",{for:"inputEmail"},"Keterangan",-1),ee={class:"col-md-12"},se={class:"form-group"},te=e("label",null,"Tanggal Unggah",-1),ae={class:"col-md-12"},oe={key:0,class:"form-group"},ne=e("label",null,"Status",-1),le=e("option",{selected:"",disabled:"",value:""}," Silahkan Pilih Status ",-1),ie=e("option",{value:"Belum Disahkan"},"Belum Disahkan",-1),re=e("option",{value:"Dipertimbangkan"},"Dipertimbangkan",-1),ue=e("option",{value:"Disahkan"},"Disahkan",-1),de=[le,ie,re,ue],ce={key:1,class:"form-group"},me=e("label",{for:"exampleInputFile"},"Unggah Dokumen",-1),ge={class:"input-group"},pe={class:"custom-file"},_e={class:"custom-file-label",for:"exampleInputFile"},ve={key:2,class:"row text-left"},he={class:"col-md-12"},ke=e("div",{class:"card-footer d-flex justify-content-center"},[e("button",{type:"submit",class:"btn btn-primary w-100"},"Unggah")],-1),Pe={__name:"FormAddDokumenPleno",setup(n){const s=q(),f=B(),y=M(),i=F(),P=E(),x=_(()=>i.params.id!==null),t=l({noSurat:"",tanggal_unggah:new Date,keterangan:"",status:""}),S=l(""),D=l(""),g=l(0),u=l(null);let p=l({});v(()=>s.errorMessage,()=>{s.errorMessage&&f.add({type:"error",text:s.errorMessage})}),v(()=>s.isSuccessSubmit,()=>{s.isSuccessSubmit&&(s.$reset(),f.add({type:"success",text:"Dokumen Pleno Berhasil Disimpan"}),y.back())}),v(()=>s.singleData,()=>{g.value=s.singleData.id,t.value.noSurat=s.singleData.no_surat,t.value.tanggal_unggah=s.singleData.tanggal_unggah,t.value.keterangan=s.singleData.keterangan,t.value.status=s.singleData.status,S.value=s.singleData.dokumen_url,D.value=s.singleData.dokumen_name});function U(d){u.value=d.target.files[0]}function I(d){d.preventDefault(),g.value==0?s.saveDokPleno(t.value,u.value):s.updateDokPleno(g.value,t.value,null)}_(()=>i.params.type&&i.params.type==="pleno");const N=_(()=>p.value.role=="admin"||p.value.role=="ketua");return V(()=>{i.params.id&&s.getDokPlenoById(i.params.id),p.value=P.getPermission}),(d,a)=>(r(),c("div",T,[e("div",j,[e("div",K,[e("h4",R," Silahkan "+h(x.value?"Perbarui":"Tambah")+" Dokumen Pleno ",1)])]),e("form",{onSubmit:O(I,["prevent"])},[e("div",H,[A(s).isLoading?(r(),J(C,{key:0})):b("",!0),e("div",$,[e("div",G,[e("div",Q,[W,m(e("input",{type:"text",id:"nosurat",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=o=>t.value.noSurat=o),required:""},null,512),[[k,t.value.noSurat]])])]),e("div",X,[e("div",Y,[Z,m(e("input",{type:"text",id:"keterangan",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=o=>t.value.keterangan=o),required:""},null,512),[[k,t.value.keterangan]])])]),e("div",ee,[e("div",se,[te,m(e("input",{class:"form-control",type:"date","onUpdate:modelValue":a[2]||(a[2]=o=>t.value.tanggal_unggah=o)},null,512),[[k,t.value.tanggal_unggah]])])]),e("div",ae,[N.value?(r(),c("div",oe,[ne,m(e("select",{class:"form-control","onUpdate:modelValue":a[3]||(a[3]=o=>t.value.status=o),required:""},de,512),[[L,t.value.status]])])):b("",!0)])]),S.value==""?(r(),c("div",ce,[me,e("div",ge,[e("div",pe,[e("input",{type:"file",class:"custom-file-input",id:"exampleInputFile",onChange:U},null,32),e("label",_e,h(u.value==null?"Temukan Dokumen dari Komputer Anda":u.value.name),1)])])])):(r(),c("div",ve,[e("div",he,[e("h5",null,"Dokumen yang diunggah: "+h(D.value),1)])]))]),ke],40,z)]))}};export{Pe as default};

import{R as o,d as g,G as l}from"./index-c949cd14.js";import{f as h}from"./date-utils-b77f79dd.js";const n=new o("berita");function c(s,e){return n.get({page:parseInt(s),search:e})}function d(s){return n.get({},s)}function f(s){return n.store(s,"save",!0)}function p(s,e){return n.update(s,e,"update",!0)}function m(s){return n.destroy("delete",s)}const a=l();function r(){a.show({color:"#0069d9",blur:"5px"})}function u(s,e){console.log("Result Berita Form"),console.log(e);const t=new FormData;return t.append("judul",s.judul),t.append("tanggal_unggah",h(s.tanggal_unggah)),t.append("isi",s.isi),e&&t.append("foto",e),t}const q=g("berita",{state:()=>({beritaData:[],beritaSingleData:{judul:"",tanggal_unggah:"",isi:"",foto_url:"",foto_name:""},errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1}),actions:{clearForm(){console.log("clear Form"),this.beritaSingleData={judul:"",tanggal_unggah:"",isi:"",foto_url:"",foto_name:""}},async getList(s){r(),await c(this.page,s).then(e=>{this.totalData=e.total,this.currentPage=e.current_page,this.totalPage=e.total>10?Math.ceil(e.total/10):1,this.lastNoPage=e.from,this.beritaData=e.data,a.hide()}).catch(e=>{e.response?this.errorMessage=e.response.data.message:e.request?this.errorMessage=e.request:this.errorMessage=e.message,a.hide()})},saveBerita(s,e){r(),f(u(s,e)).then(t=>{this.isSuccessSubmit=!0,a.hide()}).catch(t=>{t.response?this.errorMessage=t.response.data.message:t.request?this.errorMessage=t.request:this.errorMessage=t.message,a.hide()})},updateBerita(s,e,t){r(),p(s,u(e,t)).then(i=>{this.isSuccessSubmit=!0,a.hide()}).catch(i=>{i.response?this.errorMessage=i.response.data.message:i.request?this.errorMessage=i.request:this.errorMessage=i.message,a.hide()})},deleteBerita(s){r(),m(s).then(e=>{this.isSuccessSubmit=!0,a.hide()}).catch(e=>{e.response?this.errorMessage=e.response.data.message:e.request?this.errorMessage=e.request:this.errorMessage=e.message,a.hide()})},getBeritaById(s){r(),d(s).then(e=>{this.beritaSingleData=e.data,a.hide(),console.log(this.beritaSingleData)}).catch(e=>{e.response?this.errorMessage=e.response.data.message:e.request?this.errorMessage=e.request:this.errorMessage=e.message,a.hide()})}}});export{q as u};

import{e as V,c as r,r as m,w as _,o as E,v as k,g as n,i as c,j as t,k as u,z as p,B as F,C as I,u as h,x as U,y as x,F as C,G as $,t as i,A as j,E as A}from"./index-745e58d5.js";import{u as K}from"./berita-store-685b4864.js";import{_ as q,s as z}from"./notif-utils-02af4175.js";import{l as G}from"./lodash-336d108c.js";import{f as J}from"./date-utils-b77f79dd.js";import{L as Q}from"./LoadingComponent-ba3eee28.js";const O={class:"col-12"},R={class:"card"},W={class:"card-header"},X=t("button",{class:"btn btn-primary"},[t("i",{class:"fas fa-plus mr-1"}),A("Unggah Berita ")],-1),Y={class:"card-tools mt-2"},Z={class:"input-group input-group-sm",style:{width:"200px"}},tt={class:"input-group-append"},et=t("i",{class:"fas fa-times"},null,-1),at=[et],st=t("i",{class:"fas fa-search"},null,-1),ot=[st],lt={class:"card-body table-responsive p-0 mb-5"},nt={class:"table table-bordered table-hover"},it=t("thead",{class:"text-center"},[t("tr",null,[t("th",null,"No"),t("th",null,"Judul Berita"),t("th",null,"Isi Berita"),t("th",null,"Foto"),t("th",null,"Tanggal Unggah"),t("th",null,"Aksi")])],-1),dt={class:"position-relative"},rt={key:1,class:"text-center border"},ct=t("td",{colspan:"7"},"Berita Kosong",-1),ut=[ct],mt=["src","alt"],_t={class:"text-center"},pt=["onClick"],ht=["id"],gt=t("i",{class:"fas fa-pen ml-3"},null,-1),ft=["onClick"],bt=t("i",{class:"fas fa-eye ml-3"},null,-1),vt=[bt],yt={class:"modal fade bd-example-modal-lg",id:"modalDetailBerita",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"},kt={class:"modal-dialog modal-lg",role:"document"},xt={class:"modal-content"},Ct=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalLongTitle"}," Detail Isi Berita "),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"Ã—")])],-1),Dt={class:"modal-body"},Bt=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Tutup ")],-1),Vt={__name:"News",setup(Lt){const e=K(),d=V(),g=r(()=>e.beritaData),D=r(()=>e.page),B=r(()=>e.totalPage),L=r(()=>e.lastNoPage),l=m("");m([]);const w=G.debounce(()=>{l.value!==""?e.getList(l.value):e.getList()},500);_(()=>l.value,()=>{w()}),E(async()=>{await e.getList()}),_(()=>e.errorMessage,()=>{e.errorMessage&&d.add({type:"error",text:e.errorMessage})}),_(()=>e.isSuccessSubmit,()=>{e.isSuccessSubmit&&(d.add({type:"success",text:"Data Berita Berhasil di Hapus"}),e.getList())});function M(){e.page<e.totalPage?(e.page++,e.getList()):d.add({type:"warning",text:"Sudah Mencapai Halaman Maximum"})}let f=m({});function S(s){f.value=s}function N(){e.page>0?(e.page--,e.getList()):d.add({type:"warning",message:"Sudah Mencapai Halaman Minimum"})}function P(s){e.page=s,e.getList()}function T(s){s.preventDefault(),z("Konfirmasi","Hapus Data?","question","Hapus","Batal",o=>{o&&e.deleteBerita(s.target.id)})}return(s,o)=>{var v;const b=k("router-link"),H=k("center");return n(),c(C,null,[t("div",O,[t("div",R,[t("div",W,[u(b,{to:"/tambah-berita"},{default:p(()=>[X]),_:1}),t("div",Y,[t("div",Z,[F(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>l.value=a),name:"table_search",class:"form-control float-right",placeholder:"Search",onInput:o[1]||(o[1]=(...a)=>s.searchData&&s.searchData(...a))},null,544),[[I,l.value]]),t("div",tt,[t("button",{type:"button",class:"btn btn-default",onClick:o[2]||(o[2]=a=>l.value="")},at),t("button",{type:"button",class:"btn btn-default",onClick:o[3]||(o[3]=(...a)=>s.searchData&&s.searchData(...a))},ot)])])])]),t("div",lt,[t("table",nt,[it,t("tbody",dt,[h(e).isLoading?(n(),U(Q,{key:0})):x("",!0),((v=g.value)==null?void 0:v.length)==0?(n(),c("tr",rt,ut)):x("",!0),(n(!0),c(C,null,$(g.value,(a,y)=>(n(),c("tr",{key:y},[t("td",null,i(y+=L.value),1),t("td",null,i(a.judul),1),t("td",null,i(a.isi?a.isi.substring(0,20)+" ...":""),1),t("td",null,[u(H,null,{default:p(()=>[t("img",{src:a.foto_path,alt:a.foto_name,style:{"max-width":"200px"}},null,8,mt)]),_:2},1024)]),t("td",null,i(h(J)(a.tanggal_unggah)),1),t("td",_t,[t("a",{href:"#",onClick:j(T,["prevent"])},[t("i",{id:a.id,class:"fas fa-trash"},null,8,ht)],8,pt),u(b,{to:{name:"Edit Berita",params:{id:a.id}}},{default:p(()=>[gt]),_:2},1032,["to"]),t("a",{"data-toggle":"modal","data-target":"#modalDetailBerita",onClick:wt=>S(a.isi)},vt,8,ft)])]))),128))])])]),u(q,{page:D.value,"total-page":B.value,onClickPrev:N,onClickNext:M,onClickPaginate:P},null,8,["page","total-page"])])]),t("div",yt,[t("div",kt,[t("div",xt,[Ct,t("div",Dt,i(h(f)),1),Bt])])])],64)}}};export{Vt as default};

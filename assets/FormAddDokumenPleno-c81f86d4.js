import{d as N,e as w,q as B,H as M,c as _,r as l,w as h,o as F,g as d,i as c,j as e,t as v,z as m,A as k,J as V,D as A,y as J}from"./index-c949cd14.js";import{u as O}from"./dokumen-pleno-store-7f98651d.js";import"./vue3-datepicker-2eb64829.js";import"./date-utils-b77f79dd.js";const q=N("localStorage",{state:()=>({user:null,permissions:{}}),getters:{getUser(){return this.user||JSON.parse(localStorage.getItem("user"))||null},getPermission(){return Object.keys(this.permissions).length?this.permissions:JSON.parse(localStorage.getItem("permission"))||{}}},actions:{setUser(n){this.user=n,localStorage.setItem("user",JSON.stringify(n))},setPermissions(n){this.permissions=n,localStorage.setItem("permissions",JSON.stringify(n))},clearUser(){this.user=null,localStorage.removeItem("user")},clearPermissions(){this.permissions={},localStorage.removeItem("permissions")},clearLocalStorage(){this.clearUser(),this.clearPermissions()}}}),T={class:"card"},j={class:"card-header"},C={class:"d-flex align-items-center"},E={class:"card-title"},K=["onSubmit"],L={class:"card-body"},R={class:"row"},z={class:"col-md-12"},H={class:"form-group"},$=e("label",{for:"inputName"},"No Dokumen",-1),G={class:"col-md-12"},Q={class:"form-group"},W=e("label",{for:"inputEmail"},"Keterangan",-1),X={class:"col-md-12"},Y={class:"form-group"},Z=e("label",null,"Tanggal Unggah",-1),ee={class:"col-md-12"},se={key:0,class:"form-group"},te=e("label",null,"Status",-1),ae=e("option",{selected:"",disabled:"",value:""}," Silahkan Pilih Status ",-1),oe=e("option",{value:"Belum Disahkan"},"Belum Disahkan",-1),ne=e("option",{value:"Dipertimbangkan"},"Dipertimbangkan",-1),le=e("option",{value:"Disahkan"},"Disahkan",-1),ie=[ae,oe,ne,le],re={key:0,class:"form-group"},ue=e("label",{for:"exampleInputFile"},"Unggah Dokumen",-1),de={class:"input-group"},ce={class:"custom-file"},me={class:"custom-file-label",for:"exampleInputFile"},ge={key:1,class:"row text-left"},pe={class:"col-md-12"},_e=e("div",{class:"card-footer d-flex justify-content-center"},[e("button",{type:"submit",class:"btn btn-primary w-100"},"Unggah")],-1),Se={__name:"FormAddDokumenPleno",setup(n){const s=O(),f=w(),b=B(),i=M(),y=q(),P=_(()=>i.params.id!==null),t=l({noSurat:"",tanggal_unggah:new Date,keterangan:"",status:""}),S=l(""),D=l(""),g=l(0),r=l(null);let p=l({});h(()=>s.errorMessage,()=>{s.errorMessage&&f.add({type:"error",text:s.errorMessage})}),h(()=>s.isSuccessSubmit,()=>{s.isSuccessSubmit&&(s.$reset(),f.add({type:"success",text:"Dokumen Pleno Berhasil Disimpan"}),b.back())}),h(()=>s.singleData,()=>{g.value=s.singleData.id,t.value.noSurat=s.singleData.no_surat,t.value.tanggal_unggah=s.singleData.tanggal_unggah,t.value.keterangan=s.singleData.keterangan,t.value.status=s.singleData.status,S.value=s.singleData.dokumen_url,D.value=s.singleData.dokumen_name});function x(u){r.value=u.target.files[0]}function U(u){u.preventDefault(),g.value==0?s.saveDokPleno(t.value,r.value):s.updateDokPleno(g.value,t.value,null)}_(()=>i.params.type&&i.params.type==="pleno");const I=_(()=>p.value.role=="admin"||p.value.role=="ketua");return F(()=>{i.params.id&&s.getDokPlenoById(i.params.id),p.value=y.getPermission}),(u,a)=>(d(),c("div",T,[e("div",j,[e("div",C,[e("h4",E," Silahkan "+v(P.value?"Perbarui":"Tambah")+" Dokumen Pleno ",1)])]),e("form",{onSubmit:J(U,["prevent"])},[e("div",L,[e("div",R,[e("div",z,[e("div",H,[$,m(e("input",{type:"text",id:"nosurat",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=o=>t.value.noSurat=o),required:""},null,512),[[k,t.value.noSurat]])])]),e("div",G,[e("div",Q,[W,m(e("input",{type:"text",id:"keterangan",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=o=>t.value.keterangan=o),required:""},null,512),[[k,t.value.keterangan]])])]),e("div",X,[e("div",Y,[Z,m(e("input",{class:"form-control",type:"date","onUpdate:modelValue":a[2]||(a[2]=o=>t.value.tanggal_unggah=o)},null,512),[[k,t.value.tanggal_unggah]])])]),e("div",ee,[I.value?(d(),c("div",se,[te,m(e("select",{class:"form-control","onUpdate:modelValue":a[3]||(a[3]=o=>t.value.status=o),required:""},ie,512),[[V,t.value.status]])])):A("",!0)])]),S.value==""?(d(),c("div",re,[ue,e("div",de,[e("div",ce,[e("input",{type:"file",class:"custom-file-input",id:"exampleInputFile",onChange:x},null,32),e("label",me,v(r.value==null?"Temukan Dokumen dari Komputer Anda":r.value.name),1)])])])):(d(),c("div",ge,[e("div",pe,[e("h5",null,"Dokumen yang diunggah: "+v(D.value),1)])]))]),_e],40,K)]))}};export{Se as default};

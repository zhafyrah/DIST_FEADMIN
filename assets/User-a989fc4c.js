import{e as M,f as N,r as f,w as c,o as B,v as P,g as r,i as p,j as t,k as h,z as g,B as H,C as E,u as l,x as T,y as b,F as V,G as A,t as d,A as R,E as F}from"./index-659768d0.js";import{u as K}from"./user-store-47787084.js";import{_ as $,s as j}from"./notif-utils-ca08aad7.js";import{l as q}from"./lodash-336d108c.js";import{L as z}from"./LoadingComponent-f9a83e16.js";const G={class:"col-12"},Q={class:"card"},I={class:"card-header"},J=t("button",{class:"btn btn-primary"},[t("i",{class:"fas fa-plus mr-1"}),F("Tambah User ")],-1),O={class:"card-tools mt-2"},W={class:"input-group input-group-sm",style:{width:"200px"}},X={class:"input-group-append"},Y=t("i",{class:"fas fa-times"},null,-1),Z=[Y],tt=t("i",{class:"fas fa-search"},null,-1),et=[tt],st={class:"card-body table-responsive p-0"},at={class:"table table-bordered table-hover"},ot=t("thead",{class:"text-center"},[t("tr",null,[t("th",null,"No"),t("th",null,"Nama"),t("th",null,"NIP"),t("th",null,"Email"),t("th",null,"Role"),t("th",null,"Status"),t("th",null,"Aksi")])],-1),nt={class:"position-relative"},it={key:1,class:"text-center border"},lt=t("td",{colspan:"5"},"Data User Kosong",-1),ct=[lt],rt={class:"text-center"},dt={class:"text-center"},ut={class:"form-group"},pt={class:"custom-control custom-switch"},ht=["id","checked","data-id"],_t=["for"],mt={class:"text-center"},ft=["onClick"],gt=["id"],bt=t("i",{class:"fas fa-pen ml-3"},null,-1),Dt={__name:"User",setup(kt){const e=K(),n=M(),{userData:_,page:k,totalPage:v,lastNoPage:y}=N(e),i=f("");f([]);const x=q.debounce(()=>{i.value!==""?e.getList(i.value):e.getList()},500);c(()=>i.value,()=>{x()}),B(()=>{e.getList()}),c(()=>e.errorMessage,()=>{e.errorMessage&&n.add({type:"error",text:e.errorMessage})}),c(()=>e.isSuccessSubmit,()=>{e.isSuccessSubmit&&(n.add({type:"success",text:"Data User Berhasil di Hapus"}),e.getList())}),c(()=>e.isSuccessUpdate,()=>{e.isSuccessUpdate&&(n.add({type:"success",text:"Data User Berhasil di Update"}),e.getList())}),c(()=>e.isSuccessDelete,()=>{e.isSuccessDelete&&(n.add({type:"success",text:"Data User Berhasil di Hapus"}),e.getList())});function S(s){return s===1?"admin":s===2?"ketua":s===3?"anggota":s===4?"komisi":"Tidak ditemukan"}function C(){e.page<e.totalPage?(e.page++,e.getList()):n.add({type:"warning",text:"Sudah Mencapai Halaman Maximum"})}function D(){e.page>0?(e.page--,e.getList()):n.add({type:"warning",message:"Sudah Mencapai Halaman Minimum"})}function L(s){e.page=s,e.getList()}function U(s){s.preventDefault(),j("Konfirmasi","Hapus Data?","question","Hapus","Batal",o=>{o&&e.deleteUser(s.target.id)})}function w(s){const o=s.target.getAttribute("data-id"),u=s.target.checked;e.updateUser(o,{status:u?1:0})}return(s,o)=>{const u=P("router-link");return r(),p("div",G,[t("div",Q,[t("div",I,[h(u,{to:"/tambah-user"},{default:g(()=>[J]),_:1}),t("div",O,[t("div",W,[H(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>i.value=a),name:"table_search",class:"form-control float-right",placeholder:"Search",onInput:o[1]||(o[1]=(...a)=>s.searchData&&s.searchData(...a))},null,544),[[E,i.value]]),t("div",X,[t("button",{type:"button",class:"btn btn-default",onClick:o[2]||(o[2]=a=>i.value="")},Z),t("button",{type:"button",class:"btn btn-default",onClick:o[3]||(o[3]=(...a)=>s.searchData&&s.searchData(...a))},et)])])])]),t("div",st,[t("table",at,[ot,t("tbody",nt,[l(e).isLoading?(r(),T(z,{key:0})):b("",!0),l(_).length==0?(r(),p("tr",it,ct)):b("",!0),(r(!0),p(V,null,A(l(_),(a,m)=>(r(),p("tr",{key:m},[t("td",rt,d(m+=l(y)),1),t("td",null,d(a.nama),1),t("td",null,d(a.nip),1),t("td",null,d(a.email),1),t("td",null,d(S(a.user_role.roles_id)),1),t("td",dt,[t("div",ut,[t("div",pt,[t("input",{type:"checkbox",class:"custom-control-input",id:"customSwitch"+a.id,checked:a.status==1,"data-id":a.id,onChange:w},null,40,ht),t("label",{class:"custom-control-label",for:"customSwitch"+a.id},null,8,_t)])])]),t("td",mt,[t("a",{href:"#",onClick:R(U,["prevent"])},[t("i",{id:a.id,class:"fas fa-trash"},null,8,gt)],8,ft),h(u,{to:{name:"EditUser",params:{id:a.id}}},{default:g(()=>[bt]),_:2},1032,["to"])])]))),128))])])]),h($,{page:l(k),"total-page":l(v),onClickPrev:D,onClickNext:C,onClickPaginate:L},null,8,["page","total-page"])])])}}};export{Dt as default};

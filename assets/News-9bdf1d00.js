import{e as C,c as i,o as w,w as h,v as N,g as l,i as r,j as t,k as c,x as m,D as S,F as P,E as M,G as D,t as o,y as L,C as H}from"./index-c0e2bd1a.js";import{u as V}from"./berita-store-507fd780.js";import{_ as E,s as F}from"./notif-utils-9853b6af.js";import"./date-utils-ee963ed8.js";const j={class:"col-12"},K={class:"card"},T={class:"card-header"},U=t("button",{class:"btn btn-primary"},[t("i",{class:"fas fa-plus mr-1"}),H("Unggah Berita ")],-1),q=D('<div class="card-tools mt-2"><div class="input-group input-group-sm" style="width:200px;"><input type="text" name="table_search" class="form-control float-right" placeholder="Search"><div class="input-group-append"><button type="submit" class="btn btn-default"><i class="fas fa-search"></i></button></div></div></div>',1),A={class:"card-body table-responsive p-0 mb-5"},G={class:"table table-bordered table-hover"},I=t("thead",{class:"text-center"},[t("tr",null,[t("th",null,"No"),t("th",null,"Judul Berita"),t("th",null,"Isi Berita"),t("th",null,"Foto"),t("th",null,"Pembuat"),t("th",null,"Tanggal Unggah"),t("th",null,"Aksi")])],-1),J={class:""},$={key:0,class:"text-center border"},z=t("td",{colspan:"7"},"Berita Kosong",-1),O=[z],Q=["src"],R={class:"text-center"},W=["onClick"],X=["id"],Y=t("i",{class:"fas fa-pen ml-3"},null,-1),ot={__name:"News",setup(Z){const e=V(),n=C(),d=i(()=>e.beritaData),f=i(()=>e.page),b=i(()=>e.totalPage),v=i(()=>e.lastNoPage);w(async()=>{await e.getList()}),h(()=>e.errorMessage,()=>{e.errorMessage&&n.add({type:"error",text:e.errorMessage})}),h(()=>e.isSuccessSubmit,()=>{e.isSuccessSubmit&&(n.add({type:"success",text:"Data Berita Berhasil di Hapus"}),e.getList())});function x(){e.page<e.totalPage?(e.page++,e.getList()):n.add({type:"warning",text:"Sudah Mencapai Halaman Maximum"})}function k(){e.page>0?(e.page--,e.getList()):n.add({type:"warning",message:"Sudah Mencapai Halaman Minimum"})}function y(s){e.page=s,e.getList()}function B(s){s.preventDefault(),F("Konfirmasi","Hapus Data?","question","Hapus","Batal",u=>{u&&e.deleteBerita(s.target.id)})}return(s,u)=>{var _;const p=N("router-link");return l(),r("div",j,[t("div",K,[t("div",T,[c(p,{to:"/tambah-berita"},{default:m(()=>[U]),_:1}),q]),t("div",A,[t("table",G,[I,t("tbody",J,[((_=d.value)==null?void 0:_.length)==0?(l(),r("tr",$,O)):S("",!0),(l(!0),r(P,null,M(d.value,(a,g)=>(l(),r("tr",{key:g},[t("td",null,o(g+=v.value),1),t("td",null,o(a.judul),1),t("td",null,o(a.isi?a.isi.substring(0,30)+" ...":""),1),t("td",null,[t("img",{src:a.foto_path,alt:"image",style:{"max-width":"100px"}},null,8,Q)]),t("td",null,o(a.nama_user),1),t("td",null,o(a.tanggal_unggah),1),t("td",R,[t("a",{href:"#",onClick:L(B,["prevent"])},[t("i",{id:a.id,class:"fas fa-trash"},null,8,X)],8,W),c(p,{to:{name:"Edit Berita",params:{id:a.id}}},{default:m(()=>[Y]),_:2},1032,["to"])])]))),128))])])]),c(E,{page:f.value,"total-page":b.value,onClickPrev:k,onClickNext:x,onClickPaginate:y},null,8,["page","total-page"])])])}}};export{ot as default};

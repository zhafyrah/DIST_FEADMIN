import{e as g,q as j,H as y,w as u,r as p,c as x,o as k,g as n,i as d,j as e,t as c,z as _,A as h,y as w}from"./index-c949cd14.js";import{u as F}from"./sejarah-store-870c6d99.js";const D=["onSubmit"],I={class:"card"},M={class:"card-header"},U={class:"card-title"},B={class:"card-body"},N={class:"row"},q={class:"form-group col-md-12"},A=e("label",{for:"input"},"Judul",-1),C={class:"form-group col-md-12"},E=e("label",null,"Isi Sejarah Polindra",-1),P={key:0,class:"form-group"},T=e("label",{for:"exampleInputFile"},"Foto",-1),V={class:"input-group"},J={class:"custom-file"},K={class:"custom-file-label",for:"exampleInputFile"},R={key:1,class:"row text-center"},z={class:"col-md-12"},H=["src"],G={class:"col-md-12"},L=e("div",{class:"form-group"},[e("input",{type:"submit",class:"btn btn-primary w-100",value:"Kirim"})],-1),X={__name:"FormAddEditSejarah",setup(O){const a=F(),m=g(),f=j(),t=y();u(()=>a.errorMessage,()=>{a.errorMessage&&m.add({type:"error",text:a.errorMessage})}),u(()=>a.isSuccessSubmit,()=>{a.isSuccessSubmit&&(m.add({type:"success",text:"Sejarah Berhasil Disimpan"}),f.back())});const s=p({judul:"",isi:"",fotoUrl:"",fotoName:""}),v=x(()=>t.params.id!==null),l=p(null);u(()=>a.singleData,()=>{const o=a.singleData;s.value.judul=o.judul,s.value.isi=o.isi,s.value.fotoUrl=o.foto_url,s.value.fotoName=o.foto_name});function b(o){l.value=o.target.files[0]}function S(o){o.preventDefault(),t.params.id?a.updateSejarah(t.params.id,s.value,null):a.saveSejarah(s.value,l.value)}return k(()=>{t.params.id&&a.getSejarahById(t.params.id)}),(o,i)=>(n(),d("form",{class:"form",onSubmit:w(S,["prevent"])},[e("div",I,[e("div",M,[e("h4",U," Silahkan "+c(v.value?"Perbarui":"Tambah")+" Sejarah ",1)]),e("div",B,[e("div",N,[e("div",q,[A,_(e("input",{type:"text",id:"title",class:"form-control",placeholder:"Isi Judul Disini","onUpdate:modelValue":i[0]||(i[0]=r=>s.value.judul=r),required:""},null,512),[[h,s.value.judul]])]),e("div",C,[E,_(e("textarea",{class:"form-control",rows:"4",placeholder:"Isi Sejarah Polindra","onUpdate:modelValue":i[1]||(i[1]=r=>s.value.isi=r),required:""},null,512),[[h,s.value.isi]])])]),s.value.fotoUrl==""?(n(),d("div",P,[T,e("div",V,[e("div",J,[e("input",{type:"file",class:"custom-file-input",id:"exampleInputFile",onChange:b},null,32),e("label",K,c(l.value==null?"Temukan Foto dari Komputer Anda":l.value.name),1)])])])):(n(),d("div",R,[e("div",z,[e("img",{src:s.value.fotoUrl,width:"150",height:"150"},null,8,H)]),e("div",G,[e("label",null,c(s.value.fotoName),1)])]))]),L])],40,D))}};export{X as default};

import{e as M,c as r,r as g,w as u,o as S,v as w,g as i,i as c,j as t,k as _,x as L,z as N,A as P,E as G,F as V,G as B,t as d,u as F,y as H,C as T}from"./index-b1176ff1.js";import{u as E}from"./gallery-store-f13f79e7.js";import{_ as K,s as U}from"./notif-utils-ac7d0df9.js";import{l as A}from"./lodash-336d108c.js";import{f as $}from"./date-utils-b77f79dd.js";const j={class:"col-12"},q={class:"card"},z={class:"card-header"},I=t("button",{class:"btn btn-primary"},[t("i",{class:"fas fa-plus mr-1"}),T("Unggah Foto ")],-1),Q={class:"card-tools mt-2"},J={class:"input-group input-group-sm",style:{width:"200px"}},O={class:"input-group-append"},R=t("i",{class:"fas fa-times"},null,-1),W=[R],X=t("i",{class:"fas fa-search"},null,-1),Y=[X],Z={class:"card-body table-responsive p-0"},tt={class:"table table-hovered table-bordered"},et=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Foto"),t("th",null,"Keterangan"),t("th",null,"Tanggal Unggah"),t("th",null,"Aksi")])],-1),at={key:0,class:"text-center border"},st=t("td",{colspan:"5"},"Data Gallery Kosong",-1),ot=[st],nt={class:"text-center"},lt=["src","alt"],rt={class:"text-center"},it=["onClick"],ct=["id"],mt={__name:"Gallery",setup(ut){const e=E(),l=M(),p=r(()=>e.galleryData),m=r(()=>e.page),f=r(()=>e.totalPage),b=r(()=>e.lastNoPage),n=g("");g([]);const v=A.debounce(()=>{n.value!==""?e.getList(n.value):e.getList()},500);u(()=>n.value,()=>{v()}),S(()=>{e.getList()}),u(()=>e.errorMessage,()=>{e.errorMessage&&l.add({type:"error",text:e.errorMessage})}),u(()=>e.isSuccessSubmit,()=>{e.isSuccessSubmit&&e.submitMessage&&(l.add({type:"success",text:e.submitMessage}),e.getList())});function k(){e.page<e.totalPage?(e.page++,e.getList()):l.add({type:"warning",text:"Sudah Mencapai Halaman Maximum"})}function y(){e.page>0?(e.page--,e.getList()):l.add({type:"warning",message:"Sudah Mencapai Halaman Minimum"})}function x(o){e.page=o,e.getList()}function C(o){o.preventDefault(),U("Konfirmasi","Hapus Data?","question","Hapus","Batal",s=>{s&&e.deleteGallery(o.target.id)})}return(o,s)=>{const D=w("router-link");return i(),c("div",j,[t("div",q,[t("div",z,[_(D,{to:"/tambah-foto"},{default:L(()=>[I]),_:1}),t("div",Q,[t("div",J,[N(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),name:"table_search",class:"form-control float-right",placeholder:"Search",onInput:s[1]||(s[1]=(...a)=>o.searchData&&o.searchData(...a))},null,544),[[P,n.value]]),t("div",O,[t("button",{type:"button",class:"btn btn-default",onClick:s[2]||(s[2]=a=>n.value="")},W),t("button",{type:"button",class:"btn btn-default",onClick:s[3]||(s[3]=(...a)=>o.searchData&&o.searchData(...a))},Y)])])])]),t("div",Z,[t("table",tt,[et,t("tbody",null,[p.value.length==0?(i(),c("tr",at,ot)):G("",!0),(i(!0),c(V,null,B(p.value,(a,h)=>(i(),c("tr",{key:h},[t("td",nt,d(h+=b.value),1),t("td",null,[t("img",{src:a.foto_path,alt:a.foto_name,style:{"max-width":"100px","max-height":"auto"}},null,8,lt)]),t("td",null,d(a.keterangan),1),t("td",null,d(F($)(a.created_at)),1),t("td",rt,[t("a",{href:"#",onClick:H(C,["prevent"])},[t("i",{id:a.id,class:"fas fa-trash"},null,8,ct)],8,it)])]))),128))])])]),_(K,{page:m.value,"total-page":f.value,onClickPrev:y,onClickNext:k,onClickPaginate:x},null,8,["page","total-page"])])])}}};export{mt as default};

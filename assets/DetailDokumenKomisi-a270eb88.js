import{R as D,d as S,e as M,H as x,f as y,I as L,r as w,w as f,o as T,g as l,i as d,j as s,t as r,u as i,F,G as q,C as p,y as I,z as P,A as R}from"./index-b1176ff1.js";import{u as B}from"./dokumen-komisi-store-cf4e3f12.js";import{k as N}from"./form-utils-1424947d.js";import{a as V}from"./date-utils-b77f79dd.js";const k=new D("komentar-komisi");function j(a,t){return k.get({page:parseInt(a),documentId:t})}function A(a){return k.store(a,"save",!0)}const U=S("komentar-komisi",{state:()=>({komentarData:[],isLoading:!1,errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1}),actions:{getListKomentar(a){this.isLoading=!0,j(this.page,a).then(t=>{t&&(this.totalData=t.total,this.currentPage=t.current_page,this.totalPage=t.total>10?Math.ceil(t.total/10):1,this.lastNoPage=t.from,this.komentarData=t.data),this.isLoading=!1}).catch(t=>{t.response?this.errorMessage=t.response.data.message:t.request?this.errorMessage=t.request:this.errorMessage=t.message,this.isLoading=!1})},saveKomentar(a,t){this.isLoading=!0;const e=N(a,t);A(e).then(o=>{this.isSuccessSubmit=!0,this.isLoading=!1,this.getListKomentar(a.dokId)}).catch(o=>{o.response?this.errorMessage=o.response.data.message:o.request?this.errorMessage=o.request:this.errorMessage=o.message,this.isLoading=!1})}}}),z={class:"card"},C={class:"card-body"},E={class:"row"},G={class:"col-12 col-md-12 col-lg-8 order-2 order-md-1"},H={class:"row p-3"},O={class:"col-12"},$={class:"row"},J=["src"],Q={class:"mt-3"},W=s("h4",null,"Komentar",-1),X={key:0,class:"text-center"},Y={class:"user"},Z={class:"username"},ss={href:"#"},ts={class:"col-12 mt-5"},es=["onSubmit"],as={class:"form-group"},os=s("button",{type:"submit",class:"btn btn-primary"},"Komentar",-1),is={class:"col-12 col-md-12 col-lg-4 order-1 order-md-2 p-3"},rs=s("h4",{class:"text-block"},"Keterangan",-1),ns={class:"text-muted"},cs=s("hr",null,null,-1),ls={class:"text-muted"},ds={class:"text-sm"},ms={class:"d-block"},fs={__name:"DetailDokumenKomisi",setup(a){const t=B(),e=U(),o=M(),m=x(),{komentarData:_}=y(e),g=()=>({dokId:m.params.id,komentar:""}),n=L(g()),v=w(null);e.$subscribe((u,h)=>{}),f(()=>e.errorMessage,()=>{e.errorMessage&&o.add({type:"error",text:e.errorMessage})}),f(()=>e.isSuccessSubmit,()=>{Object.assign(n,g()),o.add({type:"success",text:"Komentar Berhasil di Tambahkan"})});function b(u){u.preventDefault(),e.saveKomentar(n,v.value),n.komentar=""}return T(()=>{t.getDokKomisiById(m.params.id),e.getListKomentar(m.params.id)}),(u,h)=>(l(),d("div",z,[s("div",C,[s("div",E,[s("div",G,[s("div",H,[s("div",O,[s("h4",null,"Nomor Dokumen: "+r(i(t).singleData.no_surat),1),s("div",$,[s("iframe",{src:i(t).singleData.dokumen_url,frameborder:"0",width:"100%",height:"800"},null,8,J)]),s("div",Q,[W,i(_).length==0?(l(),d("div",X," Tidak Ada Komentar ")):(l(!0),d(F,{key:1},q(i(_),(c,K)=>(l(),d("div",{class:"post",key:K},[s("div",Y,[s("span",Z,[s("a",ss,r(c.nama_user),1)])]),s("p",null,[p(r(c.komentar)+" ",1),s("p",null,r(i(V)(c.created_at)),1)])]))),128))])]),s("div",ts,[s("form",{class:"form",onSubmit:I(b,["prevent"])},[s("div",as,[P(s("textarea",{class:"form-control",placeholder:"Tulis Komentar","onUpdate:modelValue":h[0]||(h[0]=c=>n.komentar=c)},null,512),[[R,n.komentar]])]),os],40,es)])])]),s("div",is,[rs,s("p",ns,r(i(t).singleData.keterangan),1),cs,s("div",ls,[s("p",ds,[p(" Tanggal Unggah "),s("b",ms,r(i(t).singleData.tanggal_unggah),1)])])])])])]))}};export{fs as default};

import{e as S,c as i,r as h,w as u,o as w,v as N,g as l,i as c,j as t,k as _,z as P,B,C as G,u as m,x as V,y as f,F,G as H,t as d,A as T,E}from"./index-745e58d5.js";import{u as K}from"./gallery-store-55fa4bfd.js";import{_ as U,s as A}from"./notif-utils-02af4175.js";import{l as $}from"./lodash-336d108c.js";import{f as j}from"./date-utils-b77f79dd.js";import{L as q}from"./LoadingComponent-ba3eee28.js";const z={class:"col-12"},I={class:"card"},Q={class:"card-header"},J=t("button",{class:"btn btn-primary"},[t("i",{class:"fas fa-plus mr-1"}),E("Unggah Foto ")],-1),O={class:"card-tools mt-2"},R={class:"input-group input-group-sm",style:{width:"200px"}},W={class:"input-group-append"},X=t("i",{class:"fas fa-times"},null,-1),Y=[X],Z=t("i",{class:"fas fa-search"},null,-1),tt=[Z],et={class:"card-body table-responsive p-0"},at={class:"table table-hovered table-bordered"},st=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Foto"),t("th",null,"Keterangan"),t("th",null,"Tanggal Unggah"),t("th",null,"Aksi")])],-1),ot={class:"position-relative"},nt={key:1,class:"text-center border"},lt=t("td",{colspan:"5"},"Data Galeri Kosong",-1),rt=[lt],it={class:"text-center"},ct=["src","alt"],ut={class:"text-center"},dt=["onClick"],pt=["id"],kt={__name:"Gallery",setup(gt){const e=K(),r=S(),p=i(()=>e.galleryData),b=i(()=>e.page),v=i(()=>e.totalPage),k=i(()=>e.lastNoPage),n=h("");h([]);const y=$.debounce(()=>{n.value!==""?e.getList(n.value):e.getList()},500);u(()=>n.value,()=>{y()}),w(()=>{e.getList()}),u(()=>e.errorMessage,()=>{e.errorMessage&&r.add({type:"error",text:e.errorMessage})}),u(()=>e.isSuccessSubmit,()=>{e.isSuccessSubmit&&e.submitMessage&&(r.add({type:"success",text:e.submitMessage}),e.getList())});function x(){e.page<e.totalPage?(e.page++,e.getList()):r.add({type:"warning",text:"Sudah Mencapai Halaman Maximum"})}function C(){e.page>0?(e.page--,e.getList()):r.add({type:"warning",message:"Sudah Mencapai Halaman Minimum"})}function D(o){e.page=o,e.getList()}function L(o){o.preventDefault(),A("Konfirmasi","Hapus Data?","question","Hapus","Batal",s=>{s&&e.deleteGallery(o.target.id)})}return(o,s)=>{const M=N("router-link");return l(),c("div",z,[t("div",I,[t("div",Q,[_(M,{to:"/tambah-foto"},{default:P(()=>[J]),_:1}),t("div",O,[t("div",R,[B(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),name:"table_search",class:"form-control float-right",placeholder:"Search",onInput:s[1]||(s[1]=(...a)=>o.searchData&&o.searchData(...a))},null,544),[[G,n.value]]),t("div",W,[t("button",{type:"button",class:"btn btn-default",onClick:s[2]||(s[2]=a=>n.value="")},Y),t("button",{type:"button",class:"btn btn-default",onClick:s[3]||(s[3]=(...a)=>o.searchData&&o.searchData(...a))},tt)])])])]),t("div",et,[t("table",at,[st,t("tbody",ot,[m(e).isLoading?(l(),V(q,{key:0})):f("",!0),p.value.length==0?(l(),c("tr",nt,rt)):f("",!0),(l(!0),c(F,null,H(p.value,(a,g)=>(l(),c("tr",{key:g},[t("td",it,d(g+=k.value),1),t("td",null,[t("img",{src:a.foto_path,alt:a.foto_name,style:{"max-width":"100px","max-height":"auto"}},null,8,ct)]),t("td",null,d(a.keterangan),1),t("td",null,d(m(j)(a.created_at)),1),t("td",ut,[t("a",{href:"#",onClick:T(L,["prevent"])},[t("i",{id:a.id,class:"fas fa-trash"},null,8,pt)],8,dt)])]))),128))])])]),_(U,{page:b.value,"total-page":v.value,onClickPrev:C,onClickNext:x,onClickPaginate:D},null,8,["page","total-page"])])])}}};export{kt as default};

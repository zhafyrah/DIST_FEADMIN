import{R as y,d as M,K as U,e as k,q as D,H as R,c as _,r as q,o as f,w as u,g as c,i as m,j as e,t as h,z as n,A as d,J as x,F as N,G as E,u as I}from"./index-b1176ff1.js";import{u as P,a as V}from"./formating-utils-f3ad7847.js";const B=new y("master");function L(){return B.get({},"roles")}const F=U();function K(){F.show({color:"#0069d9",blur:"5px"})}const A=M("mst",{state:()=>({roleData:[],errorMessage:""}),actions:{getRoles(){K(),L().then(r=>{this.roleData=r.data,this.isLoading=!0}).catch(r=>{r.response?this.errorMessage=r.response.data.message:r.request?this.errorMessage=r.request:this.errorMessage=r.message,this.isLoading=!0})}}}),T={class:"card"},j={class:"card-header"},z={class:"card-title"},C={class:"card-body"},G={class:"form-group"},H=e("label",{for:"inputName"},"Nama",-1),J={class:"form"},O={class:"form-group"},$=e("label",{for:"inputName"},"NIP",-1),Q={class:"form"},W={class:"form-group"},X=e("label",null,"Role",-1),Y=e("option",{selected:"",disabled:"",value:"0"},"Silahkan Pilih Role",-1),Z=["value"],ee={class:"form-group"},se=e("label",{for:"inputEmail"},"Email",-1),ae={class:"form"},te={class:"form-group"},oe=e("label",{for:"inputPassword3"},"Kata Sandi",-1),re=e("div",{class:"card-footer"},[e("button",{type:"submit",class:"btn btn-primary w-100"},"Kirim")],-1),ne={__name:"FormAddEditUser",setup(r){const t=P(),p=A(),v=k(),g=D(),i=R(),b=_(()=>i.params.id!==null),S=_(()=>p.roleData),s=q({nama:"",nip:"",role:0,status:0,email:"",password:""});f(()=>{p.getRoles()}),u(()=>t.errorMessage,()=>{t.errorMessage&&v.add({type:"error",text:t.errorMessage})}),u(()=>t.isSuccessSubmit,()=>{t.isSuccessSubmit&&(t.$reset(),v.add({type:"success",text:"User Berhasil Disimpan"}),g.back())}),u(()=>t.singleData,()=>{const l=t.singleData;s.value.nama=l.nama,s.value.nip=l.nip,s.value.email=l.email,s.value.status=l.status,s.value.role=l.role_id,s.value.password=l.password});function w(l){l.preventDefault(),i.params.id?t.updateUser(i.params.id,s.value):t.saveUser(s.value)}return f(()=>{i.params.id&&t.getUserById(i.params.id)}),(l,o)=>(c(),m("div",T,[e("div",j,[e("h4",z," Silahkan "+h(b.value?"Perbarui":"Tambah")+" User ",1)]),e("form",{class:"form-user",onSubmit:w},[e("div",C,[e("div",G,[H,e("div",J,[n(e("input",{type:"text",class:"form-control",placeholder:"Silahkan Isi Nama","onUpdate:modelValue":o[0]||(o[0]=a=>s.value.nama=a),required:""},null,512),[[d,s.value.nama]])])]),e("div",O,[$,e("div",Q,[n(e("input",{type:"text",class:"form-control",placeholder:"Silahkan Isi NIP","onUpdate:modelValue":o[1]||(o[1]=a=>s.value.nip=a),required:""},null,512),[[d,s.value.nip]])])]),e("div",W,[X,n(e("select",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=a=>s.value.role=a),required:""},[Y,(c(!0),m(N,null,E(S.value,a=>(c(),m("option",{value:a.id},h(I(V)(a.role)),9,Z))),256))],512),[[x,s.value.role]])]),e("div",ee,[se,e("div",ae,[n(e("input",{type:"email",class:"form-control",placeholder:"Silahkan Isi Email","onUpdate:modelValue":o[3]||(o[3]=a=>s.value.email=a),required:""},null,512),[[d,s.value.email]])])]),e("div",te,[oe,n(e("input",{type:"password",class:"form-control",id:"inputPassword3",placeholder:"Kata Sandi","onUpdate:modelValue":o[4]||(o[4]=a=>s.value.password=a),required:""},null,512),[[d,s.value.password]])])]),re],32)]))}};export{ne as default};

import{e as w,f as L,r as f,w as c,o as M,v as N,g as u,i as p,j as t,k as h,x as g,z as P,A as B,u as l,E as H,F as E,G as V,t as r,y as A,C as T}from"./index-b1176ff1.js";import{u as I,a as F}from"./formating-utils-f3ad7847.js";import{_ as K,s as R}from"./notif-utils-ac7d0df9.js";import{l as $}from"./lodash-336d108c.js";const j={class:"col-12"},q={class:"card"},z={class:"card-header"},G=t("button",{class:"btn btn-primary"},[t("i",{class:"fas fa-plus mr-1"}),T("Tambah User ")],-1),Q={class:"card-tools mt-2"},J={class:"input-group input-group-sm",style:{width:"200px"}},O={class:"input-group-append"},W=t("i",{class:"fas fa-times"},null,-1),X=[W],Y=t("i",{class:"fas fa-search"},null,-1),Z=[Y],tt={class:"card-body table-responsive p-0"},et={class:"table table-bordered table-hover"},st=t("thead",{class:"text-center"},[t("tr",null,[t("th",null,"No"),t("th",null,"Nama"),t("th",null,"NIP"),t("th",null,"Email"),t("th",null,"Role"),t("th",null,"Status"),t("th",null,"Aksi")])],-1),at={key:0,class:"text-center border"},ot=t("td",{colspan:"5"},"Data User Kosong",-1),nt=[ot],it={class:"text-center"},lt={class:"text-center"},ct={class:"form-group"},rt={class:"custom-control custom-switch"},dt=["id","checked","data-id"],ut=["for"],pt={class:"text-center"},ht=["onClick"],_t=["id"],mt=t("i",{class:"fas fa-pen ml-3"},null,-1),xt={__name:"User",setup(ft){const e=I(),n=w(),{userData:_,page:b,totalPage:v,lastNoPage:k}=L(e),i=f("");f([]);const x=$.debounce(()=>{i.value!==""?e.getList(i.value):e.getList()},500);c(()=>i.value,()=>{x()}),M(()=>{e.getList()}),c(()=>e.errorMessage,()=>{e.errorMessage&&n.add({type:"error",text:e.errorMessage})}),c(()=>e.isSuccessSubmit,()=>{e.isSuccessSubmit&&(n.add({type:"success",text:"Data User Berhasil di Hapus"}),e.getList())}),c(()=>e.isSuccessUpdate,()=>{e.isSuccessUpdate&&(n.add({type:"success",text:"Data User Berhasil di Update"}),e.getList())}),c(()=>e.isSuccessDelete,()=>{e.isSuccessDelete&&(n.add({type:"success",text:"Data User Berhasil di Hapus"}),e.getList())});function y(){e.page<e.totalPage?(e.page++,e.getList()):n.add({type:"warning",text:"Sudah Mencapai Halaman Maximum"})}function S(){e.page>0?(e.page--,e.getList()):n.add({type:"warning",message:"Sudah Mencapai Halaman Minimum"})}function C(a){e.page=a,e.getList()}function D(a){a.preventDefault(),R("Konfirmasi","Hapus Data?","question","Hapus","Batal",o=>{o&&e.deleteUser(a.target.id)})}function U(a){const o=a.target.getAttribute("data-id"),d=a.target.checked;e.updateUser(o,{status:d?1:0})}return(a,o)=>{const d=N("router-link");return u(),p("div",j,[t("div",q,[t("div",z,[h(d,{to:"/tambah-user"},{default:g(()=>[G]),_:1}),t("div",Q,[t("div",J,[P(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),name:"table_search",class:"form-control float-right",placeholder:"Search",onInput:o[1]||(o[1]=(...s)=>a.searchData&&a.searchData(...s))},null,544),[[B,i.value]]),t("div",O,[t("button",{type:"button",class:"btn btn-default",onClick:o[2]||(o[2]=s=>i.value="")},X),t("button",{type:"button",class:"btn btn-default",onClick:o[3]||(o[3]=(...s)=>a.searchData&&a.searchData(...s))},Z)])])])]),t("div",tt,[t("table",et,[st,t("tbody",null,[l(_).length==0?(u(),p("tr",at,nt)):H("",!0),(u(!0),p(E,null,V(l(_),(s,m)=>(u(),p("tr",{key:m},[t("td",it,r(m+=l(k)),1),t("td",null,r(s.nama),1),t("td",null,r(s.nip),1),t("td",null,r(s.email),1),t("td",null,r(l(F)(s.role)),1),t("td",lt,[t("div",ct,[t("div",rt,[t("input",{type:"checkbox",class:"custom-control-input",id:"customSwitch"+s.id,checked:s.status==1,"data-id":s.id,onChange:U},null,40,dt),t("label",{class:"custom-control-label",for:"customSwitch"+s.id},null,8,ut)])])]),t("td",pt,[t("a",{href:"#",onClick:A(D,["prevent"])},[t("i",{id:s.id,class:"fas fa-trash"},null,8,_t)],8,ht),h(d,{to:{name:"EditUser",params:{id:s.id}}},{default:g(()=>[mt]),_:2},1032,["to"])])]))),128))])])]),h(K,{page:l(b),"total-page":l(v),onClickPrev:S,onClickNext:y,onClickPaginate:C},null,8,["page","total-page"])])])}}};export{xt as default};

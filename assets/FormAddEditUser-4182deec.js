import{R as U,d as k,K as M,e as D,q as R,H as q,c as f,r as x,o as _,w as c,g as u,i as m,j as e,t as h,u as g,x as L,y as N,B as n,C as d,J as B,F as V,G as E}from"./index-659768d0.js";import{u as I}from"./user-store-47787084.js";import{L as P}from"./LoadingComponent-f9a83e16.js";const C=new U("master");function F(){return C.get({},"roles")}function K(o){return(o+"").replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}const z=M();function T(){z.show({color:"#0069d9",blur:"5px"})}const j=k("mst",{state:()=>({roleData:[],errorMessage:""}),actions:{getRoles(){T(),F().then(o=>{this.roleData=o.data,this.isLoading=!0}).catch(o=>{o.response?this.errorMessage=o.response.data.message:o.request?this.errorMessage=o.request:this.errorMessage=o.message,this.isLoading=!0})}}}),A={class:"card"},G={class:"card-header"},H={class:"card-title"},J={class:"card-body position-relative"},O={class:"form-group"},$=e("label",{for:"inputName"},"Nama",-1),Q={class:"form"},W={class:"form-group"},X=e("label",{for:"inputName"},"NIP",-1),Y={class:"form"},Z={class:"form-group"},ee=e("label",null,"Role",-1),se=e("option",{selected:"",disabled:"",value:"0"},"Silahkan Pilih Role",-1),ae=["value"],te={class:"form-group"},oe=e("label",{for:"inputEmail"},"Email",-1),re={class:"form"},le={class:"form-group"},ie=e("label",{for:"inputPassword3"},"Kata Sandi",-1),ne=e("div",{class:"card-footer"},[e("button",{type:"submit",class:"btn btn-primary w-100"},"Kirim")],-1),me={__name:"FormAddEditUser",setup(o){const a=I(),p=j(),v=D(),b=R(),i=q(),S=f(()=>i.params.id!==null),w=f(()=>p.roleData),s=x({nama:"",nip:"",role:0,status:0,email:"",password:""});_(()=>{p.getRoles()}),c(()=>a.errorMessage,()=>{a.errorMessage&&v.add({type:"error",text:a.errorMessage})}),c(()=>a.isSuccessSubmit,()=>{a.isSuccessSubmit&&(a.$reset(),v.add({type:"success",text:"User Berhasil Disimpan"}),b.back())}),c(()=>a.singleData,()=>{const l=a.singleData;s.value.nama=l.nama,s.value.nip=l.nip,s.value.email=l.email,s.value.status=l.status,s.value.role=l.role_id,s.value.password=l.password});function y(l){l.preventDefault(),i.params.id?a.updateUser(i.params.id,s.value):a.saveUser(s.value)}return _(()=>{i.params.id&&a.getUserById(i.params.id)}),(l,r)=>(u(),m("div",A,[e("div",G,[e("h4",H," Silahkan "+h(S.value?"Perbarui":"Tambah")+" User ",1)]),e("form",{class:"form-user",onSubmit:y},[e("div",J,[g(a).isLoading?(u(),L(P,{key:0})):N("",!0),e("div",O,[$,e("div",Q,[n(e("input",{type:"text",class:"form-control",placeholder:"Silahkan Isi Nama","onUpdate:modelValue":r[0]||(r[0]=t=>s.value.nama=t),required:""},null,512),[[d,s.value.nama]])])]),e("div",W,[X,e("div",Y,[n(e("input",{type:"text",class:"form-control",placeholder:"Silahkan Isi NIP","onUpdate:modelValue":r[1]||(r[1]=t=>s.value.nip=t),required:""},null,512),[[d,s.value.nip]])])]),e("div",Z,[ee,n(e("select",{class:"form-control","onUpdate:modelValue":r[2]||(r[2]=t=>s.value.role=t),required:""},[se,(u(!0),m(V,null,E(w.value,t=>(u(),m("option",{value:t.id},h(g(K)(t.role)),9,ae))),256))],512),[[B,s.value.role]])]),e("div",te,[oe,e("div",re,[n(e("input",{type:"email",class:"form-control",placeholder:"Silahkan Isi Email","onUpdate:modelValue":r[3]||(r[3]=t=>s.value.email=t),required:""},null,512),[[d,s.value.email]])])]),e("div",le,[ie,n(e("input",{type:"password",class:"form-control",id:"inputPassword3",placeholder:"Kata Sandi","onUpdate:modelValue":r[4]||(r[4]=t=>s.value.password=t),required:""},null,512),[[d,s.value.password]])])]),ne],32)]))}};export{me as default};

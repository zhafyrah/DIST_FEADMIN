import{R as y,d as K,e as M,H as P,f as w,I as L,r as T,w as k,o as B,v as F,g as i,i as r,j as e,t as l,u as n,F as q,G as I,C as _,y as N,z as R,A as V,k as C,x as U}from"./index-b1176ff1.js";import{u as j}from"./dokumen-pleno-store-df545e17.js";import{k as A}from"./form-utils-1424947d.js";import{a as z}from"./date-utils-b77f79dd.js";const f=new y("komentar-pleno");function E(a,t){return f.get({page:parseInt(a),documentId:t})}function G(a){return f.store(a,"save",!0)}const H=K("komentar-pleno",{state:()=>({komentarData:[],isLoading:!1,errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1,loadingSubmit:!1}),actions:{getListKomentar(a){this.isLoading=!0,E(this.page,a).then(t=>{t&&(this.totalData=t.total,this.currentPage=t.current_page,this.totalPage=t.total>10?Math.ceil(t.total/10):1,this.lastNoPage=t.from,this.komentarData=t.data),this.isLoading=!1}).catch(t=>{t.response?this.errorMessage=t.response.data.message:t.request?this.errorMessage=t.request:this.errorMessage=t.message,this.isLoading=!1})},saveKomentar(a,t){this.isLoading=!0;const s=A(a,t);G(s).then(o=>{this.isLoading=!1,this.isSuccessSubmit=!0,this.getListKomentar(a.dokId)}).catch(o=>{o.response?this.errorMessage=o.response.data.message:o.request?this.errorMessage=o.request:this.errorMessage=o.message,this.isLoading=!1})}}}),O={class:"card"},$={class:"card-body"},J={class:"row"},Q={class:"col-12 col-md-12 col-lg-8 order-2 order-md-1"},W={class:"row p-3"},X={class:"col-12"},Y={class:"row"},Z=["src"],ee={class:"mt-3"},te=e("h4",null,"Komentar",-1),se={key:0,class:"text-center"},ae={class:"user"},oe={class:"username",style:{color:"blue"}},ne={class:"col-12 mt-5"},ie=["onSubmit"],re={class:"form-group"},le={type:"submit",class:"btn btn-primary"},ce={key:0,class:"text-center spinner-border"},de={key:1},me={class:"col-12 col-md-12 col-lg-4 order-1 order-md-2 p-3"},ue=e("h4",{class:"text-block"},"Keterangan",-1),he={class:"text-muted"},_e=e("hr",null,null,-1),ge={class:"text-muted"},pe={class:"text"},ke={class:"d-block"},fe=e("div",{class:"form-group",hidden:""},[e("p",{class:"text"},"Status Dokumen"),e("select",{class:"form-control select",style:{width:"100%"},placeholder:"Silahkan Pilih Status",hidden:""},[e("option",{selected:"",disabled:""},"Silahkan Pilih Status"),e("option",{"select-id":"Belum Disahkan"},"Belum Disahkan"),e("option",{"select-id":"Dipertimbangkan"},"Dipertimbangkan"),e("option",{"select-id":"Disahkan"},"Disahkan")])],-1),xe={__name:"DetailDokumenPleno",setup(a){const t=j(),s=H(),o=M(),m=P(),{komentarData:g,loadingSubmit:b}=w(s),p=()=>({dokId:m.params.id,komentar:""}),c=L(p()),v=T(null);s.$subscribe((u,h)=>{}),k(()=>s.errorMessage,()=>{s.errorMessage&&o.add({type:"error",text:s.errorMessage})}),k(()=>s.isSuccessSubmit,()=>{Object.assign(c,p()),o.add({type:"success",text:"Komentar Berhasil di Tambahkan"})});function D(u){u.preventDefault(),s.saveKomentar(c,v.value),c.komentar=""}return B(()=>{t.getDokPlenoById(m.params.id),s.getListKomentar(m.params.id)}),(u,h)=>{const S=F("router-link");return i(),r("div",O,[e("div",$,[e("div",J,[e("div",Q,[e("div",W,[e("div",X,[e("h4",null,"Nomor Dokumen: "+l(n(t).singleData.no_surat),1),e("div",Y,[e("iframe",{src:n(t).singleData.dokumen_url,frameborder:"0",width:"100%",height:"800"},null,8,Z)]),e("div",ee,[te,n(g).length==0?(i(),r("div",se," Tidak Ada Komentar ")):(i(!0),r(q,{key:1},I(n(g),(d,x)=>(i(),r("div",{class:"post",key:x},[e("div",ae,[e("span",oe,l(d.nama_user),1)]),e("p",null,[_(l(d.komentar)+" ",1),e("p",null,l(n(z)(d.created_at)),1)])]))),128))])]),e("div",ne,[e("form",{class:"form",onSubmit:N(D,["prevent"])},[e("div",re,[R(e("textarea",{class:"form-control",placeholder:"Tulis Komentar","onUpdate:modelValue":h[0]||(h[0]=d=>c.komentar=d)},null,512),[[V,c.komentar]])]),e("button",le,[n(b)?(i(),r("span",ce)):(i(),r("span",de,"Komentar"))])],40,ie)])])]),e("div",me,[ue,e("p",he,l(n(t).singleData.keterangan),1),_e,e("div",ge,[e("p",pe,[_(" Tanggal Unggah "),e("b",ke,l(n(t).singleData.tanggal_unggah),1)]),fe]),C(S,{to:"dokumen",class:"btn btn-primary",hidden:""},{default:U(()=>[_(" Simpan Update")]),_:1})])])])])}}};export{xe as default};

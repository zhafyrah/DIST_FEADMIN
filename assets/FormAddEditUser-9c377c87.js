import{R as M,d as U,H as k,e as D,q as R,I as q,c as f,r as x,o as h,w as u,g as c,i as m,j as e,t as g,z as n,A as d,K as E,F as I,E as N,u as P}from"./index-194bee8b.js";import{u as V,a as B}from"./formating-utils-9c46dca4.js";const F=new M("master");function K(){return F.get({},"roles")}const p=k();function L(){p.show({color:"#0069d9",blur:"5px"})}const A=U("mst",{state:()=>({roleData:[],errorMessage:""}),actions:{getRoles(){L(),K().then(r=>{this.roleData=r.data,p.hide()}).catch(r=>{r.response?this.errorMessage=r.response.data.message:r.request?this.errorMessage=r.request:this.errorMessage=r.message,p.hide()})}}}),T={class:"card"},j={class:"card-header"},z={class:"card-title"},C={class:"card-body"},H={class:"form-group"},O=e("label",{for:"inputName"},"Nama",-1),$={class:"form"},G={class:"form-group"},J=e("label",{for:"inputName"},"NIP",-1),Q={class:"form"},W={class:"form-group"},X=e("label",null,"Role",-1),Y=e("option",{selected:"",disabled:"",value:"0"},"Silahkan Pilih Role",-1),Z=["value"],ee={class:"form-group"},se=e("label",{for:"inputEmail"},"Email",-1),ae={class:"form"},te={class:"form-group"},oe=e("label",{for:"inputPassword3"},"Kata Sandi",-1),re=e("div",{class:"card-footer"},[e("button",{type:"submit",class:"btn btn-primary w-100"},"Kirim")],-1),ne={__name:"FormAddEditUser",setup(r){const t=V(),v=A(),_=D(),b=R(),i=q(),S=f(()=>i.params.id!==null),w=f(()=>v.roleData),s=x({nama:"",nip:"",role:0,status:0,email:"",password:""});h(()=>{v.getRoles()}),u(()=>t.errorMessage,()=>{t.errorMessage&&_.add({type:"error",text:t.errorMessage})}),u(()=>t.isSuccessSubmit,()=>{t.isSuccessSubmit&&(t.$reset(),_.add({type:"success",text:"User Berhasil Disimpan"}),b.back())}),u(()=>t.singleData,()=>{const l=t.singleData;s.value.nama=l.nama,s.value.nip=l.nip,s.value.email=l.email,s.value.status=l.status,s.value.role=l.role_id,s.value.password=l.password});function y(l){l.preventDefault(),i.params.id?t.updateUser(i.params.id,s.value):t.saveUser(s.value)}return h(()=>{i.params.id&&t.getUserById(i.params.id)}),(l,o)=>(c(),m("div",T,[e("div",j,[e("h4",z," Silahkan "+g(S.value?"Perbarui":"Tambah")+" User ",1)]),e("form",{class:"form-user",onSubmit:y},[e("div",C,[e("div",H,[O,e("div",$,[n(e("input",{type:"text",class:"form-control",placeholder:"Silahkan Isi Nama","onUpdate:modelValue":o[0]||(o[0]=a=>s.value.nama=a),required:""},null,512),[[d,s.value.nama]])])]),e("div",G,[J,e("div",Q,[n(e("input",{type:"text",class:"form-control",placeholder:"Silahkan Isi NIP","onUpdate:modelValue":o[1]||(o[1]=a=>s.value.nip=a),required:""},null,512),[[d,s.value.nip]])])]),e("div",W,[X,n(e("select",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=a=>s.value.role=a),required:""},[Y,(c(!0),m(I,null,N(w.value,a=>(c(),m("option",{value:a.id},g(P(B)(a.role)),9,Z))),256))],512),[[E,s.value.role]])]),e("div",ee,[se,e("div",ae,[n(e("input",{type:"email",class:"form-control",placeholder:"Silahkan Isi Email","onUpdate:modelValue":o[3]||(o[3]=a=>s.value.email=a),required:""},null,512),[[d,s.value.email]])])]),e("div",te,[oe,n(e("input",{type:"password",class:"form-control",id:"inputPassword3",placeholder:"Kata Sandi","onUpdate:modelValue":o[4]||(o[4]=a=>s.value.password=a),required:""},null,512),[[d,s.value.password]])])]),re],32)]))}};export{ne as default};

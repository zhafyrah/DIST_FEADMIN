import{R as M,d as x,G as y,e as w,H as T,f as F,I as q,r as I,w as f,o as L,g as d,i as m,j as t,t as n,u as r,F as P,E as R,C as k,y as B,z as N,A as V}from"./index-c949cd14.js";import{u as j}from"./dokumen-komisi-store-2637e843.js";import{k as A}from"./form-utils-1424947d.js";import{a as E}from"./date-utils-b77f79dd.js";const b=new M("komentar-komisi");function O(a,e){return b.get({page:parseInt(a),documentId:e})}function U(a){return b.store(a,"save",!0)}const l=y();function v(){l.show({color:"#0069d9",blur:"5px"})}const z=x("komentar-komisi",{state:()=>({komentarData:[],errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1}),actions:{getListKomentar(a){v(),O(this.page,a).then(e=>{e&&(this.totalData=e.total,this.currentPage=e.current_page,this.totalPage=e.total>10?Math.ceil(e.total/10):1,this.lastNoPage=e.from,this.komentarData=e.data),l.hide()}).catch(e=>{e.response?this.errorMessage=e.response.data.message:e.request?this.errorMessage=e.request:this.errorMessage=e.message,l.hide()})},saveKomentar(a,e){v();const s=A(a,e);U(s).then(o=>{this.isSuccessSubmit=!0,l.hide(),this.getListKomentar(a.dokId)}).catch(o=>{o.response?this.errorMessage=o.response.data.message:o.request?this.errorMessage=o.request:this.errorMessage=o.message,l.hide()})}}}),C={class:"card"},G={class:"card-body"},H={class:"row"},$={class:"col-12 col-md-12 col-lg-8 order-2 order-md-1"},J={class:"row p-3"},Q={class:"col-12"},W={class:"row"},X=["src"],Y={class:"mt-3"},Z=t("h4",null,"Komentar",-1),tt={key:0,class:"text-center"},et={class:"user"},st={class:"username"},at={href:"#"},ot={class:"col-12 mt-5"},rt=["onSubmit"],nt={class:"form-group"},it=t("button",{type:"submit",class:"btn btn-primary"},"Komentar",-1),ct={class:"col-12 col-md-12 col-lg-4 order-1 order-md-2 p-3"},lt=t("h4",{class:"text-block"},"Keterangan",-1),dt={class:"text-muted"},mt=t("hr",null,null,-1),ut={class:"text-muted"},ht={class:"text-sm"},_t={class:"d-block"},vt={__name:"DetailDokumenKomisi",setup(a){const e=j(),s=z(),o=w(),u=T(),{komentarData:g}=F(s),p=()=>({dokId:u.params.id,komentar:""}),i=q(p()),K=I(null);s.$subscribe((h,_)=>{}),f(()=>s.errorMessage,()=>{s.errorMessage&&o.add({type:"error",text:s.errorMessage})}),f(()=>s.isSuccessSubmit,()=>{Object.assign(i,p()),o.add({type:"success",text:"Komentar Berhasil di Tambahkan"})});function D(h){h.preventDefault(),s.saveKomentar(i,K.value),i.komentar=""}return L(()=>{e.getDokKomisiById(u.params.id),s.getListKomentar(u.params.id)}),(h,_)=>(d(),m("div",C,[t("div",G,[t("div",H,[t("div",$,[t("div",J,[t("div",Q,[t("h4",null,"Nomor Dokumen: "+n(r(e).singleData.no_surat),1),t("div",W,[t("iframe",{src:r(e).singleData.dokumen_url,frameborder:"0",width:"100%",height:"800"},null,8,X)]),t("div",Y,[Z,r(g).length==0?(d(),m("div",tt," Tidak Ada Komentar ")):(d(!0),m(P,{key:1},R(r(g),(c,S)=>(d(),m("div",{class:"post",key:S},[t("div",et,[t("span",st,[t("a",at,n(c.nama_user),1)])]),t("p",null,[k(n(c.komentar)+" ",1),t("p",null,n(r(E)(c.created_at)),1)])]))),128))])]),t("div",ot,[t("form",{class:"form",onSubmit:B(D,["prevent"])},[t("div",nt,[N(t("textarea",{class:"form-control",placeholder:"Tulis Komentar","onUpdate:modelValue":_[0]||(_[0]=c=>i.komentar=c)},null,512),[[V,i.komentar]])]),it],40,rt)])])]),t("div",ct,[lt,t("p",dt,n(r(e).singleData.keterangan),1),mt,t("div",ut,[t("p",ht,[k(" Tanggal Unggah "),t("b",_t,n(r(e).singleData.tanggal_unggah),1)])])])])])]))}};export{vt as default};

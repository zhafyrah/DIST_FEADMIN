import{R as K,d as M,G as w,e as P,H as T,f as B,I as F,r as q,w as f,o as I,v as L,g as i,i as r,j as e,t as l,u as n,F as N,E as R,C as g,y as V,z as C,A as U,k as j,x as A}from"./index-c949cd14.js";import{u as E}from"./dokumen-pleno-store-7f98651d.js";import{k as O}from"./form-utils-1424947d.js";import{a as z}from"./date-utils-b77f79dd.js";const b=new K("komentar-pleno");function G(a,t){return b.get({page:parseInt(a),documentId:t})}function H(a){return b.store(a,"save",!0)}const m=w();function $(){m.show({color:"#0069d9",blur:"5px"})}const J=M("komentar-pleno",{state:()=>({komentarData:[],errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1,loadingSubmit:!1}),actions:{getListKomentar(a){$(),G(this.page,a).then(t=>{t&&(this.totalData=t.total,this.currentPage=t.current_page,this.totalPage=t.total>10?Math.ceil(t.total/10):1,this.lastNoPage=t.from,this.komentarData=t.data),m.hide()}).catch(t=>{t.response?this.errorMessage=t.response.data.message:t.request?this.errorMessage=t.request:this.errorMessage=t.message,m.hide()})},saveKomentar(a,t){this.loadingSubmit=!0;const s=O(a,t);H(s).then(o=>{this.loadingSubmit=!1,this.isSuccessSubmit=!0,this.getListKomentar(a.dokId)}).catch(o=>{o.response?this.errorMessage=o.response.data.message:o.request?this.errorMessage=o.request:this.errorMessage=o.message,this.loadingSubmit=!1,m.hide()})}}}),Q={class:"card"},W={class:"card-body"},X={class:"row"},Y={class:"col-12 col-md-12 col-lg-8 order-2 order-md-1"},Z={class:"row p-3"},ee={class:"col-12"},te={class:"row"},se=["src"],ae={class:"mt-3"},oe=e("h4",null,"Komentar",-1),ne={key:0,class:"text-center"},ie={class:"user"},re={class:"username",style:{color:"blue"}},le={class:"col-12 mt-5"},ce=["onSubmit"],de={class:"form-group"},me={type:"submit",class:"btn btn-primary"},ue={key:0,class:"text-center spinner-border"},he={key:1},_e={class:"col-12 col-md-12 col-lg-4 order-1 order-md-2 p-3"},ge=e("h4",{class:"text-block"},"Keterangan",-1),pe={class:"text-muted"},ke=e("hr",null,null,-1),fe={class:"text-muted"},be={class:"text"},ve={class:"d-block"},Se=e("div",{class:"form-group",hidden:""},[e("p",{class:"text"},"Status Dokumen"),e("select",{class:"form-control select",style:{width:"100%"},placeholder:"Silahkan Pilih Status",hidden:""},[e("option",{selected:"",disabled:""},"Silahkan Pilih Status"),e("option",{"select-id":"Belum Disahkan"},"Belum Disahkan"),e("option",{"select-id":"Dipertimbangkan"},"Dipertimbangkan"),e("option",{"select-id":"Disahkan"},"Disahkan")])],-1),Me={__name:"DetailDokumenPleno",setup(a){const t=E(),s=J(),o=P(),u=T(),{komentarData:p,loadingSubmit:v}=B(s),k=()=>({dokId:u.params.id,komentar:""}),c=F(k()),S=q(null);s.$subscribe((h,_)=>{}),f(()=>s.errorMessage,()=>{s.errorMessage&&o.add({type:"error",text:s.errorMessage})}),f(()=>s.isSuccessSubmit,()=>{Object.assign(c,k()),o.add({type:"success",text:"Komentar Berhasil di Tambahkan"})});function D(h){h.preventDefault(),s.saveKomentar(c,S.value),c.komentar=""}return I(()=>{t.getDokPlenoById(u.params.id),s.getListKomentar(u.params.id)}),(h,_)=>{const x=L("router-link");return i(),r("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("h4",null,"Nomor Dokumen: "+l(n(t).singleData.no_surat),1),e("div",te,[e("iframe",{src:n(t).singleData.dokumen_url,frameborder:"0",width:"100%",height:"800"},null,8,se)]),e("div",ae,[oe,n(p).length==0?(i(),r("div",ne," Tidak Ada Komentar ")):(i(!0),r(N,{key:1},R(n(p),(d,y)=>(i(),r("div",{class:"post",key:y},[e("div",ie,[e("span",re,l(d.nama_user),1)]),e("p",null,[g(l(d.komentar)+" ",1),e("p",null,l(n(z)(d.created_at)),1)])]))),128))])]),e("div",le,[e("form",{class:"form",onSubmit:V(D,["prevent"])},[e("div",de,[C(e("textarea",{class:"form-control",placeholder:"Tulis Komentar","onUpdate:modelValue":_[0]||(_[0]=d=>c.komentar=d)},null,512),[[U,c.komentar]])]),e("button",me,[n(v)?(i(),r("span",ue)):(i(),r("span",he,"Komentar"))])],40,ce)])])]),e("div",_e,[ge,e("p",pe,l(n(t).singleData.keterangan),1),ke,e("div",fe,[e("p",be,[g(" Tanggal Unggah "),e("b",ve,l(n(t).singleData.tanggal_unggah),1)]),Se]),j(x,{to:"dokumen",class:"btn btn-primary",hidden:""},{default:A(()=>[g(" Simpan Update")]),_:1})])])])])}}};export{Me as default};

import{e as w,q as k,H as x,c as j,o as C,w as d,r as l,g as c,i as f,j as t,t as h,u as s,x as F,y as b,B as g,C as p,A as M}from"./index-745e58d5.js";import{u as U}from"./berita-store-685b4864.js";import"./vue3-datepicker-2eb64829.js";import{L as N}from"./LoadingComponent-ba3eee28.js";import"./date-utils-b77f79dd.js";const V={class:"card"},q={class:"card-header"},P={class:"d-flex align-items-center"},I={class:"card-title"},L=["onSubmit"],T={class:"card-body position-relative"},A={class:"form-group"},E=t("label",{for:"inputNews"},"Judul Berita",-1),J={class:"form-group"},R=t("label",null,"Tanggal Unggah",-1),H={key:1,class:"form-group"},z=t("label",{for:"inputContent"},"Isi Berita",-1),G={class:"form-group"},K=t("label",{for:"inputPhoto"},"Foto",-1),O={class:"input-group"},Q={class:"custom-file"},W={class:"custom-file-label",for:"inputPhoto"},X=t("div",{class:"card-footer"},[t("button",{type:"submit",class:"btn btn-primary"},"Unggah")],-1),se={__name:"FormAddNews",setup(Y){const e=U(),m=w(),v=k(),i=x(),S=j(()=>i.params.id!==null);C(()=>{i.params.id?(e.getBeritaById(i.params.id),u.value=e.beritaSingleData):e.clearForm()}),d(()=>e.errorMessage,()=>{e.errorMessage&&m.add({type:"error",text:e.errorMessage})}),d(()=>e.singleData,()=>{const a=e.singleData;u.judul=a.judul,u.tanggal_unggah=new Date(a.tanggal_unggah),u.isi=a.isi,_.value=a.foto_url,D.value=a.foto_name}),d(()=>e.isSuccessSubmit,()=>{e.isSuccessSubmit&&(m.add({type:"success",text:"Berita Berhasil Disimpan"}),v.back())});const u=l({judul:"",tanggal_unggah:new Date,isi:""}),r=l(null),_=l(""),D=l("");l("");function B(a){r.value=a.target.files[0]}function y(a){a.preventDefault(),i.params.id?e.updateBerita(i.params.id,e.beritaSingleData,r.value):e.saveBerita(e.beritaSingleData,r.value)}return(a,o)=>(c(),f("div",V,[t("div",q,[t("div",P,[t("h4",I," Silahkan "+h(S.value?"Perbarui":"Tambah")+" Berita ",1)])]),t("form",{onSubmit:M(y,["prevent"])},[t("div",T,[s(e).isLoading?(c(),F(N,{key:0})):b("",!0),t("div",A,[E,g(t("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>s(e).beritaSingleData.judul=n),type:"text",class:"form-control",id:"news",placeholder:"Judul Berita",required:""},null,512),[[p,s(e).beritaSingleData.judul]])]),t("div",J,[R,g(t("input",{class:"form-control",type:"date","onUpdate:modelValue":o[1]||(o[1]=n=>s(e).beritaSingleData.tanggal_unggah=n)},null,512),[[p,s(e).beritaSingleData.tanggal_unggah]])]),_.value==""?(c(),f("div",H,[z,g(t("textarea",{"onUpdate:modelValue":o[2]||(o[2]=n=>s(e).beritaSingleData.isi=n),class:"form-control",rows:"3",placeholder:"Isi berita",required:""},null,512),[[p,s(e).beritaSingleData.isi]]),t("div",G,[K,t("div",O,[t("div",Q,[t("input",{type:"file",class:"custom-file-input",accept:".jpg, .jpeg",onChange:B,required:""},null,32),t("label",W,h(r.value==null?"Pilih foto dari perangkat":r.value.name),1)])])])])):b("",!0)]),X],40,L)]))}};export{se as default};

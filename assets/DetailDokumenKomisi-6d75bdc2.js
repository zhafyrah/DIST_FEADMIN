import{R as D,d as S,e as L,H as M,f as x,I as y,r as w,w as f,o as T,g as l,i as d,j as s,t as r,u as i,F as B,G as F,E as p,A as q,x as I,y as N,B as P,C as R}from"./index-659768d0.js";import{u as V}from"./dokumen-komisi-store-4d900522.js";import{k as C}from"./form-utils-1424947d.js";import{a as j}from"./date-utils-b77f79dd.js";import{L as A}from"./LoadingComponent-f9a83e16.js";const k=new D("komentar-komisi");function E(a,t){return k.get({page:parseInt(a),documentId:t})}function U(a){return k.store(a,"save",!0)}const G=S("komentar-komisi",{state:()=>({komentarData:[],isLoading:!1,errorMessage:"",totalData:0,page:1,lastPage:1,totalPage:1,lastNoPage:0,isSuccessSubmit:!1}),actions:{getListKomentar(a){this.isLoading=!0,E(this.page,a).then(t=>{t&&(this.totalData=t.total,this.currentPage=t.current_page,this.totalPage=t.total>10?Math.ceil(t.total/10):1,this.lastNoPage=t.from,this.komentarData=t.data),this.isLoading=!1}).catch(t=>{t.response?this.errorMessage=t.response.data.message:t.request?this.errorMessage=t.request:this.errorMessage=t.message,this.isLoading=!1})},saveKomentar(a,t){this.isLoading=!0;const e=C(a,t);U(e).then(o=>{this.isSuccessSubmit=!0,this.isLoading=!1,this.getListKomentar(a.dokId)}).catch(o=>{o.response?this.errorMessage=o.response.data.message:o.request?this.errorMessage=o.request:this.errorMessage=o.message,this.isLoading=!1})}}}),H={class:"card"},O={class:"card-body"},$={class:"row"},z={class:"col-12 col-md-12 col-lg-8 order-2 order-md-1"},J={class:"row p-3"},Q={class:"col-12"},W={class:"row"},X=["src"],Y={class:"mt-3"},Z=s("h4",null,"Komentar",-1),ss={key:0,class:"text-center"},ts={class:"user"},es={class:"username"},as={href:"#"},os={class:"col-12 mt-5"},is=["onSubmit"],rs={class:"form-group"},ns=s("button",{type:"submit",class:"btn btn-primary"},"Komentar",-1),cs={class:"col-12 col-md-12 col-lg-4 order-1 order-md-2 p-3"},ls=s("h4",{class:"text-block"},"Keterangan",-1),ds={class:"text-muted"},ms=s("hr",null,null,-1),us={class:"text-muted"},hs={class:"text-sm"},_s={class:"d-block"},bs={__name:"DetailDokumenKomisi",setup(a){const t=V(),e=G(),o=L(),m=M(),{komentarData:_}=x(e),g=()=>({dokId:m.params.id,komentar:""}),n=y(g()),v=w(null);e.$subscribe((u,h)=>{}),f(()=>e.errorMessage,()=>{e.errorMessage&&o.add({type:"error",text:e.errorMessage})}),f(()=>e.isSuccessSubmit,()=>{Object.assign(n,g()),o.add({type:"success",text:"Komentar Berhasil di Tambahkan"})});function b(u){u.preventDefault(),e.saveKomentar(n,v.value),n.komentar=""}return T(()=>{t.getDokKomisiById(m.params.id),e.getListKomentar(m.params.id)}),(u,h)=>(l(),d("div",H,[s("div",O,[s("div",$,[s("div",z,[s("div",J,[s("div",Q,[s("h4",null,"Nomor Dokumen: "+r(i(t).singleData.no_surat),1),s("div",W,[s("iframe",{src:i(t).singleData.dokumen_url,frameborder:"0",width:"100%",height:"800"},null,8,X)]),s("div",Y,[Z,i(_).length==0?(l(),d("div",ss," Tidak Ada Komentar ")):(l(!0),d(B,{key:1},F(i(_),(c,K)=>(l(),d("div",{class:"post",key:K},[s("div",ts,[s("span",es,[s("a",as,r(c.nama_user),1)])]),s("p",null,[p(r(c.komentar)+" ",1),s("p",null,r(i(j)(c.created_at)),1)])]))),128))])]),s("div",os,[s("form",{class:"form",onSubmit:q(b,["prevent"])},[i(e).isLoading?(l(),I(A,{key:0})):N("",!0),s("div",rs,[P(s("textarea",{class:"form-control",placeholder:"Tulis Komentar","onUpdate:modelValue":h[0]||(h[0]=c=>n.komentar=c)},null,512),[[R,n.komentar]])]),ns],40,is)])])]),s("div",cs,[ls,s("p",ds,r(i(t).singleData.keterangan),1),ms,s("div",us,[s("p",hs,[p(" Tanggal Unggah "),s("b",_s,r(i(t).singleData.tanggal_unggah),1)])])])])])]))}};export{bs as default};
